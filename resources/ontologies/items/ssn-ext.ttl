PREFIX owl: <http://www.w3.org/2002/07/owl#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX schema: <https://schema.org/>
PREFIX skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX sosa: <http://www.w3.org/ns/sosa/>
PREFIX ssn: <http://www.w3.org/ns/ssn/>
PREFIX xsd: <http://www.w3.org/2001/XMLSchema#>

sosa:hasMember
    a owl:ObjectProperty ;
    rdfs:domain sosa:ObservationCollection ;
    rdfs:isDefinedBy ssn:ext ;
    rdfs:range
        [
            owl:unionOf (
                sosa:Observation
                sosa:ObservationCollection
            ) ;
        ] ;
    rdfs:subPropertyOf rdfs:member ;
    schema:description "Link to a member within a collection of (observations) or (collections of observations) that share the same value for one or more of the characteristic properties" ;
    schema:domainIncludes sosa:ObservationCollection ;
    schema:name "member observation" ;
    schema:rangeIncludes
        sosa:Observation ,
        sosa:ObservationCollection ;
.

sosa:hasOriginalSample
    a owl:ObjectProperty ;
    rdfs:domain sosa:Sample ;
    rdfs:isDefinedBy ssn:ext ;
    rdfs:range sosa:Sample ;
    schema:description "link to the original sample that is related to the context sample through a chain of isSampleOf relations" ;
    schema:domainIncludes sosa:Sample ;
    schema:name "has original sample" ;
    schema:rangeIncludes sosa:Sample ;
.

sosa:hasSampledFeature
    a owl:ObjectProperty ;
    rdfs:domain sosa:Sample ;
    rdfs:isDefinedBy ssn:ext ;
    rdfs:range sosa:FeatureOfInterest ;
    schema:description "link to the ultimate feature of interest of the context sample - i.e. the end of a chain of isSampleOf relations" ;
    schema:domainIncludes sosa:Sample ;
    schema:name "is ultimate sample of" ;
    schema:rangeIncludes sosa:FeatureOfInterest ;
.

sosa:phenomenonTime
    schema:domainIncludes sosa:ObservationCollection ;
.

sosa:resultTime
    schema:domainIncludes sosa:ObservationCollection ;
.

sosa:Actuation
    rdfs:subClassOf
        [
            a owl:Restriction ;
            owl:minCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasUltimateFeatureOfInterest ;
        ] ;
.

sosa:Sampling
    rdfs:subClassOf
        [
            a owl:Restriction ;
            owl:minCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasUltimateFeatureOfInterest ;
        ] ;
.

sosa:hasFeatureOfInterest
    schema:domainIncludes sosa:ObservationCollection ;
.

sosa:madeBySensor
    schema:domainIncludes sosa:ObservationCollection ;
.

sosa:observedProperty
    schema:domainIncludes sosa:ObservationCollection ;
.

sosa:usedProcedure
    schema:domainIncludes sosa:ObservationCollection ;
.

sosa:Observation
    rdfs:subClassOf
        [
            a owl:Restriction ;
            owl:minCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasUltimateFeatureOfInterest ;
        ] ;
    schema:description """If values are not provided for the following Observation properties, they may be provided by the ObservationCollection of which it is a member:
- hasFeatureOfInterest
- hasUltimateFeatureOfInterest
- madeBySensor
- observedProperty
- phenomenonTime
- resultTime
- usedProcedure""" ;
.

sosa:hasUltimateFeatureOfInterest
    a owl:ObjectProperty ;
    rdfs:comment """should match a property chain something like this but with sosa:isSampleOf*
      owl:propertyChainAxiom ( sosa:hasFeatureOfInterest sosa:isSampleOf )""" ;
    rdfs:domain
        [
            owl:unionOf (
                sosa:Observation
                sosa:Sampling
                sosa:Actuation
            ) ;
        ] ;
    rdfs:isDefinedBy ssn:ext ;
    rdfs:range sosa:FeatureOfInterest ;
    schema:description "link to the ultimate feature of interest of an observation or act of sampling. This is useful when the proximate feature of interest is a sample of the ultimate feature of interest, directly or trasntitively." ;
    schema:domainIncludes
        sosa:Actuation ,
        sosa:Observation ,
        sosa:Sampling ;
    schema:name "has ultimate feature of interest" ;
    schema:rangeIncludes sosa:FeatureOfInterest ;
.

ssn:ext
    a owl:Ontology ;
    owl:imports ssn: ;
    skos:historyNote "2026-01 NJC: added OntPub elements, including the Ontology class definition" ;
    skos:scopeNote """The classes, properties, and axioms in this RDF graph are described in https://www.w3.org/TR/vocab-ssn-ext/

Their status is non-normative, and SSN applications are not required to recognize or support them. """ ;
    schema:copyrightNotice "Copyright 2019 W3C/OGC." ;
    schema:creator <http://orcid.org/0000-0002-3884-3420> ;
    schema:dateCreated "2018-03-08"^^xsd:date ;
    schema:dateIssued "2019-12-24"^^xsd:date ;
    schema:dateModified "2019-12-24"^^xsd:date ;
    schema:description """Some extensions to the SSN Ontology, to support

1. discovery and use of observation and sample data through links to an ultimate feature-of-interest, or sample
2. observations are  made as part of a set or collection, in which one or more of the observation properties - hasFeatureOfInterest, observedProperty, madeBySensor, usedProcedure, phenomenonTime, resultTime - are shared by all members of the collection. 

These extensions to the SSN Ontology are packaged in a separate RDF graph to enable loading and use if required. """ ;
    schema:license
        <http://www.opengeospatial.org/ogc/Software> ,
        <http://www.w3.org/Consortium/Legal/2015/copyright-software-and-document> ;
    schema:name "Extensions to the SSN Ontology" ;
    schema:publisher <https://www.w3.org> ;
.

sosa:Sample
    rdfs:subClassOf 
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasOriginalSample ;
        ] ,
        [
            a owl:Restriction ;
            owl:minCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasSampledFeature ;
        ] ;
.

sosa:ObservationCollection
    a owl:Class ;
    rdfs:isDefinedBy ssn:ext ;
    rdfs:subClassOf 
        [
            a owl:Restriction ;
            owl:allValuesFrom ssn:Stimulus ;
            owl:onProperty ssn:wasOriginatedBy ;
        ] ,
        [
            a owl:Restriction ;
            owl:allValuesFrom sosa:ObservableProperty ;
            owl:onProperty sosa:observedProperty ;
        ] ,
        [
            a owl:Restriction ;
            owl:allValuesFrom sosa:Sensor ;
            owl:onProperty sosa:madeBySensor ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:madeBySensor ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasFeatureOfInterest ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:observedProperty ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:usedProcedure ;
        ] ,
        [
            a owl:Restriction ;
            owl:minCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasMember ;
        ] ,
        [
            a owl:Restriction ;
            owl:allValuesFrom sosa:Procedure ;
            owl:onProperty sosa:usedProcedure ;
        ] ,
        [
            a owl:Restriction ;
            owl:allValuesFrom sosa:FeatureOfInterest ;
            owl:onProperty sosa:hasFeatureOfInterest ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:hasUltimateFeatureOfInterest ;
        ] ,
        [
            a owl:Restriction ;
            owl:allValuesFrom sosa:FeatureOfInterest ;
            owl:onProperty sosa:hasUltimateFeatureOfInterest ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:resultTime ;
        ] ,
        [
            a owl:Restriction ;
            owl:maxCardinality "1"^^xsd:nonNegativeInteger ;
            owl:onProperty sosa:phenomenonTime ;
        ] ;
    schema:description "Collection of observations, typically with one or more property shared by all of its members" ;
    schema:name "Collection of observations" ;
.
